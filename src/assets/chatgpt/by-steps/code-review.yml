name: Code Review
category: Development
author: Phodal Huang
description: 在这个示例中，我们将会展示如何使用 ChatGPT 进行代码审查。

steps:
  - name: Code Review
    ask: |
      作为 Pull Request 的代码审查者，需对下列代码变更提供反馈。提供的变更以补丁形式呈现，每个补丁条目包含提交信息（Subject line）和以 unidiff 格式显示的代码变更（diffs）。

      要求：

      - 审查补丁中的代码变更（diffs）并提供反馈。
      - 如果有任何错误，请指出。
      - 代码是否按照提交信息中所述执行？
      - 不要强调小问题和琐碎问题。
      - 如果有多个评论，请使用项目符号。

      要审查的 Pull Request 补丁如下：

      $$patch$$
    values:
      patch: |
        --- a/src/storage/planetscale.ts
        +++ b/src/storage/planetscale.ts
        @@ -122,6 +122,16 @@ export const deleteConversation = cache(async (conversationId: number) => {
          .execute();
        });

        +export const deleteAllConversationsByUserId = cache(async (userId: number) => {
        +  return queryBuilder
        +    .updateTable("conversations")
        +    .set({
           +      deleted: 1,
        +    })
        +    .where("conversations.user_id", "=", userId)
        +    .execute();
        +});
        +
         export const getUserByKeyHashed = cache(async (keyHashed: string) => {
           const result = await queryBuilder
           .selectFrom("users")

    cachedResponseRegex:
